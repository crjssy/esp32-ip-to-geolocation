# pytest.yaml
timeout: 60000  # 超时时间（毫秒）

# 在 WokWi 模拟器中运行的命令
commands:
  - run: |
      pytest ${{ env.test_dirs }} \
        --embedded-services idf,wokwi \
        --tb short \
        --junit-xml test_wokwi_${{ matrix.target }}_${{ matrix.idf-branch }}.xml

# 上传测试结果
upload-artifact:
  uses: actions/upload-artifact@v2
  with:
    name: test_wokwi_${{ matrix.target }}_${{ matrix.idf-branch }}_junit
    path: test_wokwi_${{ matrix.target }}_${{ matrix.idf-branch }}.xml
